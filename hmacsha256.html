<!DOCTYPE html>
<html>
  <head>
    <title>hmacsha256.html</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" 
          href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <script type='text/javascript'
            src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
 
    <script type='text/javascript'
            src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

    <script type='text/javascript'
            src="//crypto-js.googlecode.com/svn/tags/3.1.2/build/components/core-min.js"></script>
    <script type='text/javascript'
            src="//crypto-js.googlecode.com/svn/tags/3.1.2/build/components/enc-utf16-min.js"></script>
    <script type='text/javascript'
            src="//crypto-js.googlecode.com/svn/tags/3.1.2/build/components/enc-base64-min.js"></script>

    <style type='text/css'>
     #output > div {
       border: 1px dotted Grey;
     }
    </style>

    <script>
     function calcHmac(event) {
       if (event) {
         event.preventDefault();
       }
       var message = $('#text').val();
       var key = $('#key').val();
       var hmac = CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA256, key);

       hmac.update(message);
       var hash = hmac.finalize();
       var hashInBase64 = CryptoJS.enc.Base64.stringify(hash);
       $('#hmacb64').text(hashInBase64);
       var hashInHex = CryptoJS.enc.Hex.stringify(hash);
       $('#hmachex').text(hashInHex);
     }

     $(document).ready(function() {
       $( "form" ).on('submit',calcHmac);
       $( "#submit" ).on('click',calcHmac);
     });
    </script>

  </head>

  <!-- ======================================================= -->

  <body>

    <div style='margin: 10px;'>
      <h3>Calculate an HMAC using SHA-256</h3>

      <form role="form">
        <div class="form-group">
          <label for="key">key:</label>
          <input type="text" class="form-control" id="key"/>
        </div>
        <div class="form-group">
          <label for="text">text:</label>
          <input type="textarea" class="form-control" id="text"/>
        </div>
        <div>
          <button type="submit" class="btn btn-default" >Submit</button>
          <input type="submit" value="Go" class="button" id="submit"/>        
        </div>
      </form>

      <div id='output'>

        <div>
        <span id='hmaclabel'>Base64-encoded HMAC:</span>
        <span id='hmacb64'></span>
        </div>

        <div>
        <span id='hmaclabel2'>HEX-encoded HMAC:</span>
        <span id='hmachex'></span>
        </div>

      </div>
    </div>

  </body>

</html>
