<!doctype html>
<html lang="en">
  <head>
    <title>OIDC URL-builder for Google Sign-in</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="favico-signin.svg" type="image/svg+xml" />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/choices.js@9.0.1/public/assets/styles/choices.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/choices.js@9.0.1/public/assets/scripts/choices.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/main.css" />
    <script type="text/javascript" src="js/goog-url-builder-page.js"></script>
  </head>
  <body>
    <!-- ======================================================= -->
    <div style="margin: 10px">
      <h3>OIDC Sign-in link builder for Google</h3>
      <form role="form">
        <div class="form-group">
          <label for="baseloginurl">Base URL:</label>
          <input
            type="text"
            class="form-control"
            id="baseloginurl"
            value="https://accounts.google.com/o/oauth2/v2/auth"
            title="eg, https://accounts.google.com/o/oauth2/v2/auth"
          />
        </div>

        <div class="form-group">
          <label for="clientid">Client ID:</label>
          <!-- find this id in the Google API console: https://console.developers.google.com/apis/credentials -->
          <input
            type="text"
            spellcheck="false"
            class="form-control"
            id="clientid"
            value="671646694294-2e6h95mkgafps8b5qh1us2hajlptqj8q.apps.googleusercontent.com"
          />
        </div>

        <div class="form-group">
          <label for="clientsecret">Client Secret:</label>
          <!-- find this id in the Google API console: https://console.developers.google.com/apis/credentials  -->
          <input
            type="text"
            spellcheck="false"
            class="form-control"
            id="clientsecret"
            value="c3NPLQnwJlN1D891-N4yKg8R"
          />
        </div>

        <div class="form-group">
          <div>
            <label for="state">state</label>
            <button
              type="button"
              class="btn btn-outline-secondary btn-sm btn-reload"
              data-target="state"
              title="regenerate random"
            >
              <i class="bi bi-arrow-clockwise"></i>
            </button>
          </div>
          <input
            type="text"
            spellcheck="false"
            class="form-control"
            id="state"
            title="required, can be any string"
          />
        </div>

        <div class="form-group">
          <div>
            <label for="nonce">nonce</label>
            <button
              type="button"
              class="btn btn-outline-secondary btn-sm btn-reload"
              data-target="nonce"
              title="regenerate random"
            >
              <i class="bi bi-arrow-clockwise"></i>
            </button>
          </div>
          <input
            type="text"
            spellcheck="false"
            class="form-control"
            id="nonce"
            title="required, can be any string, cannot re-use values"
          />
        </div>

        <div class="form-group">
          <label for="cburi">callback URI:</label>
          <input
            type="text"
            class="form-control"
            id="cburi"
            value="http://dinochiesa.github.io/openid-connect/goog-reply.html"
          />
        </div>

        <div class="form-group">
          <div>
            <label for="rtype">response type</label>
          </div>
          <select
            multiple
            name="rtype"
            id="rtype"
            class="multi-choice rtype"
            data-placeholder="response type"
            required
          >
            <option value=""></option>
            <option value="code">code</option>
            <option value="token">token</option>
            <option value="id_token">id_token</option>
            <option value="invalid_option">invalid_option</option>
          </select>
        </div>

        <div class="form-group">
          <div>
            <label for="scope">scope</label>
          </div>
          <select
            name="scope"
            id="scope"
            multiple
            class="multi-choice scope"
            data-placeholder="scope"
            required
          >
            <option value=""></option>
            <option value="openid">openid</option>
            <option value="profile">profile</option>
            <option value="email">email</option>
            <option value="https://www.googleapis.com/auth/drive">drive</option>
            <option value="invalid_option">invalid_option</option>
          </select>
        </div>

        <div class="form-group" style="display: none">
          <div>
            <label for="aud">Audience</label>
          </div>
          <input type="text" class="form-control" id="aud" value="" />
        </div>

        <div class="divider"></div>

        <div class="form-group">
          <div>
            <label for="code">code</label>
          </div>
          <input
            type="text"
            title="paste in the code here..."
            class="form-control"
            id="code"
          />
        </div>

        <div>
          <button type="submit" class="btn btn-default" style="display: none">
            Submit
          </button>
        </div>
      </form>

      <div id="output">
        <a href="" id="authzlink"></a>
        <div id="authzRedemption">
          <div id="preBox"></div>
          <button
            class="btn btn-outline-secondary btn-md"
            id="btn-copy"
            data-target="preBox"
            title="Copy the curl command to the clipboard"
          >
            Copy curl
          </button>
          <button
            class="btn btn-outline-secondary btn-md"
            id="btn-redeem"
            title="invoke the code redemption from the browser"
          >
            Redeem
          </button>
          <button class="btn btn-outline-secondary btn-md" id="btn-reset">
            Reset
          </button>
        </div>
        <div id="token-decoded"></div>
      </div>
    </div>
  </body>
</html>
